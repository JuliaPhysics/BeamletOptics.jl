<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Rays · BeamletOptics.jl</title><meta name="title" content="Rays · BeamletOptics.jl"/><meta property="og:title" content="Rays · BeamletOptics.jl"/><meta property="twitter:title" content="Rays · BeamletOptics.jl"/><meta name="description" content="Documentation for BeamletOptics.jl."/><meta property="og:description" content="Documentation for BeamletOptics.jl."/><meta property="twitter:description" content="Documentation for BeamletOptics.jl."/><meta property="og:url" content="https://StackEnjoyer.github.io/BeamletOptics.jl/basics/rays/"/><meta property="twitter:url" content="https://StackEnjoyer.github.io/BeamletOptics.jl/basics/rays/"/><link rel="canonical" href="https://StackEnjoyer.github.io/BeamletOptics.jl/basics/rays/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="BeamletOptics.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="BeamletOptics.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/expander/">Beam expander</a></li><li><a class="tocitem" href="../../tutorials/microscope/">Miniature microscope</a></li><li><a class="tocitem" href="../../tutorials/michelson/">Michelson interferometer</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/spherical_lenses/">Spherical lenses</a></li><li><a class="tocitem" href="../../examples/aspherical_lenses/">Aspherical lenses</a></li><li><a class="tocitem" href="../../examples/double_gauss/">Double Gauss lens</a></li><li><a class="tocitem" href="../../examples/lens_groups/">Lens groups</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../intro/">Introduction</a></li><li class="is-active"><a class="tocitem" href>Rays</a><ul class="internal"><li><a class="tocitem" href="#Basic-Ray"><span>Basic <code>Ray</code></span></a></li><li><a class="tocitem" href="#Polarized-Rays"><span>Polarized Rays</span></a></li></ul></li><li><a class="tocitem" href="../beams/">Beams</a></li><li><a class="tocitem" href="../elements/">Optical elements</a></li><li><a class="tocitem" href="../systems/">Optical systems</a></li><li><a class="tocitem" href="../render/">Visualization</a></li></ul></li><li><span class="tocitem">Components</span><ul><li><a class="tocitem" href="../../components/components/">Overview</a></li><li><a class="tocitem" href="../../components/mirrors/">Mirrors</a></li><li><a class="tocitem" href="../../components/lenses/">Lenses</a></li><li><a class="tocitem" href="../../components/beamsplitters/">Beamsplitters</a></li><li><a class="tocitem" href="../../components/detectors/">Detectors</a></li></ul></li><li><span class="tocitem">Developer Documentation</span><ul><li><a class="tocitem" href="../../guide/">Dev. guide</a></li><li><a class="tocitem" href="../../design/">API design</a></li></ul></li><li><a class="tocitem" href="../../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Basics</a></li><li class="is-active"><a href>Rays</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Rays</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/StackEnjoyer/BeamletOptics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/StackEnjoyer/BeamletOptics.jl/blob/master/docs/src/basics/rays.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Rays"><a class="docs-heading-anchor" href="#Rays">Rays</a><a id="Rays-1"></a><a class="docs-heading-anchor-permalink" href="#Rays" title="Permalink"></a></h1><p>Individual monochromatic rays form the basic building blocks to describe the propagation of light through an optical system using geometrical optics. In general, the ray path in the context of this package is described by </p><p class="math-container">\[\vec{x}(t) = \vec{p} + t \cdot \vec{d}\]</p><p>where <span>$\vec{p}$</span> and <span>$\vec{d}$</span> are the position and direction <span>$\mathbb{R}^3$</span>-vectors, respectively. The ray length <span>$t$</span> is used to describe the geometrical length of the ray. This assumes that the <a href="../../reference/#BeamletOptics.RefractiveIndex"><code>BeamletOptics.RefractiveIndex</code></a> along the ray path is constant. If after solving an optical system a ray intersection is determined, a new ray must be spawned to model an arbitrary light path. This data is stored, e.g., in a <a href="../../reference/#BeamletOptics.Beam"><code>Beam</code></a>. More on this can be found in the <a href="../beams/#Beams">Beams</a> chapter. </p><h2 id="Basic-Ray"><a class="docs-heading-anchor" href="#Basic-Ray">Basic <code>Ray</code></a><a id="Basic-Ray-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Ray" title="Permalink"></a></h2><p>The generic type that describes geometrical rays is <a href="../../reference/#BeamletOptics.AbstractRay"><code>BeamletOptics.AbstractRay</code></a>. Refer to its documentation for more information about what data is used to model light propagation. A minimal implementation of this API (i.e. subtype) is provided by the <a href="../../reference/#BeamletOptics.Ray"><code>Ray</code></a>:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BeamletOptics.Ray-basics-rays" href="#BeamletOptics.Ray-basics-rays"><code>BeamletOptics.Ray</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Ray{T} &lt;: AbstractRay{T}</code></pre><p>Mutable struct to store ray information.</p><p><strong>Fields</strong></p><ul><li><code>pos</code>: a point in R³ that describes the <code>Ray</code> origin</li><li><code>dir</code>: a normalized vector in R³ that describes the <code>Ray</code> direction</li><li><code>intersection</code>: refer to <a href="../../reference/#BeamletOptics.Intersection"><code>Intersection</code></a></li><li><code>λ</code>: wavelength in [m]</li><li><code>n</code>: refractive index along the beam path</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/StackEnjoyer/BeamletOptics.jl/blob/c18e778a10cbe9018967c0ec060a232ad827b634/src/Rays.jl#L1-L13">source</a></section></article><p>This ray type is able to model reflection and <a href="https://www.rp-photonics.com/refraction.html">refraction</a>, using Snell&#39;s law, within the limits of geometrical optics. A single ray only ever describes the optical path between its starting point and the closest intersection, e.g. the surface of a <a href="../../reference/#BeamletOptics.Lens"><code>Lens</code></a>. A visualization is shown below. The <code>position</code> of the <code>Ray</code> is stored in relation to a global coordinate system. The normed direction is indicated by the blue arrow. The <code>Ray</code> intersects with a shape and stores this data in the <code>intersection</code> field. This includes the length until the point of intersection (marked as a dashed blue line) and the normal vector at the intersected surface (marked by a black arrow). </p><p><img src="../ray_showcase.png" alt="Basic ray plot"/></p><h2 id="Polarized-Rays"><a class="docs-heading-anchor" href="#Polarized-Rays">Polarized Rays</a><a id="Polarized-Rays-1"></a><a class="docs-heading-anchor-permalink" href="#Polarized-Rays" title="Permalink"></a></h2><p>In order to model the effect of polarizing elements, e.g. a <span>$\lambda/4$</span>-plate, the polarization ray tracing calculus of Yun et. al is used [<a href="../../reference/#Yun2011_1">3</a>, <a href="../../reference/#Yun2011_2">4</a>]. This formalism allows to model the effects of said elements on the electric field vector <span>$E_0$</span> using the <a href="https://www.rp-photonics.com/polarization_of_light.html">Jones formalism</a> in global coordinates:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BeamletOptics.PolarizedRay-basics-rays" href="#BeamletOptics.PolarizedRay-basics-rays"><code>BeamletOptics.PolarizedRay</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PolarizedRay{T} &lt;: AbstractRay{T}</code></pre><p>A ray type to model the propagation of an electric field vector based on the publication:</p><p><strong>Yun, Garam, Karlton Crabtree, and Russell A. Chipman. &quot;Three-dimensional polarization ray-tracing calculus I: definition and diattenuation.&quot; Applied optics 50.18 (2011): 2855-2865.</strong></p><p>The geometrical ray description is identical to the standard <a href="../../reference/#BeamletOptics.Ray"><code>Ray</code></a>. The polarization interaction can be described in local s-p-coordinates but must be transformed into global coordinates using the method described in the publication above, see also <a href="../../reference/#BeamletOptics._calculate_global_E0-NTuple{4, AbstractArray}"><code>_calculate_global_E0</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>pos</code>: a point in R³ that describes the <code>Ray</code> origin</li><li><code>dir</code>: a normalized vector in R³ that describes the <code>Ray</code> direction</li><li><code>intersection</code>: refer to <a href="../../reference/#BeamletOptics.Intersection"><code>Intersection</code></a></li><li><code>λ</code>: wavelength in [m]</li><li><code>n</code>: refractive index along the beam path</li><li><code>E0</code>: complex-valued 3-tuple to represent the electric field in global coordinates</li></ul><p><strong>Jones matrices</strong></p><p>In local coordinates the Jones matrices in the case of reflection/refraction are defined as</p><ul><li>reflection: [-rₛ 0; 0 rₚ]</li><li>transmission: [tₛ 0; 0 tₚ]</li></ul><p>where r and t are the complex-valued Fresnel coefficients (see also <a href="../../reference/#BeamletOptics.fresnel_coefficients-Union{Tuple{T}, Tuple{T, Number}} where T"><code>fresnel_coefficients</code></a>).</p><p><strong>Additional information</strong></p><div class="admonition is-warning" id="Field-vector-c1b5889368bff125"><header class="admonition-header">Field vector<a class="admonition-anchor" href="#Field-vector-c1b5889368bff125" title="Permalink"></a></header><div class="admonition-body"><p>It is assumed that the electric field vector <span>$E_0$</span> stays orthogonal to the direction of propagation throughout the optical system.</p></div></div><div class="admonition is-warning" id="Intensity-333dd6e90494becd"><header class="admonition-header">Intensity<a class="admonition-anchor" href="#Intensity-333dd6e90494becd" title="Permalink"></a></header><div class="admonition-body"><p>E0 can not be converted into an <a href="../../reference/#BeamletOptics.intensity"><code>intensity</code></a> value, since a single <code>PolarizedRay</code> can not directly model the change in intensity during imaging by an optical system.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/StackEnjoyer/BeamletOptics.jl/blob/c18e778a10cbe9018967c0ec060a232ad827b634/src/PolarizedRays.jl#L1-L36">source</a></section></article><h3 id="Fresnel-coefficients"><a class="docs-heading-anchor" href="#Fresnel-coefficients">Fresnel coefficients</a><a id="Fresnel-coefficients-1"></a><a class="docs-heading-anchor-permalink" href="#Fresnel-coefficients" title="Permalink"></a></h3><p>This package uses the equations of Fowles [<a href="../../reference/#Fowles1989">5</a>, p. 44] and Peatross [<a href="../../reference/#Peatross2015">6</a>, p. 78] to determine the <a href="https://www.rp-photonics.com/fresnel_equations.html">Fresnel coefficents</a> at a given surface where the <a href="../../reference/#BeamletOptics.PolarizedRay"><code>PolarizedRay</code></a> enters from a medium with (complex) refractive index <span>$n_1$</span> into a medium with <span>$n_2$</span>. The ability to define coatings is currently not included. </p><div class="admonition is-warning" id="Warning-a462408ef9958aa2"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-a462408ef9958aa2" title="Permalink"></a></header><div class="admonition-body"><p>When a <a href="../../reference/#BeamletOptics.PolarizedRay"><code>PolarizedRay</code></a> interacts with a refractive medium, e.g. an <a href="../../reference/#BeamletOptics.AbstractRefractiveOptic"><code>BeamletOptics.AbstractRefractiveOptic</code></a>, the default tracing behaviour is to only trace the refracted and ignore the reflected ray, unless <a href="https://www.rp-photonics.com/total_internal_reflection.html">Total Internal Reflection (TIR)</a> occurs. </p></div></div><p>Below the Fresnel coefficients for different <span>$n_1 \rightarrow n_2$</span> interfaces are listed to highlight the definition of signs used for this package.</p><h4 id="Vacuum-to-glass"><a class="docs-heading-anchor" href="#Vacuum-to-glass">Vacuum to glass</a><a id="Vacuum-to-glass-1"></a><a class="docs-heading-anchor-permalink" href="#Vacuum-to-glass" title="Permalink"></a></h4><p>First, the Fresnel coefficients for <span>$n_1 = 1.0$</span> to <span>$n_2 = 1.5$</span> will be calculated. The angle of incidence <span>$\theta$</span> refers to the plane of incidence in the <code>s</code>enkrecht and <code>p</code>arallel coordinate system. Note that the imaginary part of the coefficents is shown by the dash-dotted lines.</p><pre><code class="language-julia hljs">using BeamletOptics

# Angle of incidence
θ = deg2rad.(0:.01:90)

# Define refractive indices - vacuum to glass
n1 = 1.0
n2 = 1.5

# Calculate complex Fresnel coefficients
rs, rp, ts, tp = BeamletOptics.fresnel_coefficients(θ, n2/n1)</code></pre><img src="0b144a7f.png" alt="Example block output"/><p>Note that for this example, the imaginary part of the coefficients is zero for all considered <code>θ</code>s.</p><h4 id="Glass-to-vacuum"><a class="docs-heading-anchor" href="#Glass-to-vacuum">Glass to vacuum</a><a id="Glass-to-vacuum-1"></a><a class="docs-heading-anchor-permalink" href="#Glass-to-vacuum" title="Permalink"></a></h4><p>For a glass-vacuum interface with <span>$n_1 = 1.5$</span> to <span>$n_2 = 1.0$</span> the coefficients are calculated likewise. Note the unsteadiness of the coefficients at around 40°. This is the critical angle where <a href="https://www.rp-photonics.com/total_internal_reflection.html">TIR</a> occurs.</p><pre><code class="language-julia hljs"># Define refractive indices - glass to vacuum
n1 = 1.5
n2 = 1.0

# Calculate complex Fresnel coefficients
rs, rp, ts, tp = BeamletOptics.fresnel_coefficients(θ, n2/n1)</code></pre><img src="3f8159ed.png" alt="Example block output"/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../intro/">« Introduction</a><a class="docs-footer-nextpage" href="../beams/">Beams »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.12.0 on <span class="colophon-date" title="Tuesday 17 June 2025 14:46">Tuesday 17 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
